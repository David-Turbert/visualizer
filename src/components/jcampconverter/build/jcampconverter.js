// Generated by uRequire v0.7.0-beta.14 target: 'buildForAll' template: 'combined'
// Combined template optimized with RequireJS/r.js v2.1.15 & almond v0.3.0.
/**
 * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){var r=!("function"!=typeof define||!define.amd),n="object"==typeof exports,a=function(){var e,a,i;return function(t){function r(e,t){return y.call(e,t)}function n(e,t){var r,n,a,i,o,s,l,f,p,u,c,d=t&&t.split("/"),g=F.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=e.split("/"),o=e.length-1,F.nodeIdCompat&&b.test(e[o])&&(e[o]=e[o].replace(b,"")),e=d.concat(e),p=0;p<e.length;p+=1)if(c=e[p],"."===c)e.splice(p,1),p-=1;else if(".."===c){if(1===p&&(".."===e[2]||".."===e[0]))break;p>0&&(e.splice(p-1,2),p-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(r=e.split("/"),p=r.length;p>0;p-=1){if(n=r.slice(0,p).join("/"),d)for(u=d.length;u>0;u-=1)if(a=g[d.slice(0,u).join("/")],a&&(a=a[n])){i=a,s=p;break}if(i)break;!l&&h&&h[n]&&(l=h[n],f=p)}!i&&l&&(i=l,s=f),i&&(r.splice(0,s,i),e=r.join("/"))}return e}function o(e,r){return function(){var n=X.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),d.apply(t,n.concat([e,r]))}}function s(e){return function(t){return n(t,e)}}function l(e){return function(t){m[e]=t}}function f(e){if(r(v,e)){var n=v[e];delete v[e],x[e]=!0,c.apply(t,n)}if(!r(m,e)&&!r(x,e))throw new Error("No "+e);return m[e]}function p(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return F&&F.config&&F.config[e]||{}}}var c,d,g,h,m={},v={},F={},x={},y=Object.prototype.hasOwnProperty,X=[].slice,b=/\.js$/;g=function(e,t){var r,a=p(e),i=a[0];return e=a[1],i&&(i=n(i,t),r=f(i)),i?e=r&&r.normalize?r.normalize(e,s(t)):n(e,t):(e=n(e,t),a=p(e),i=a[0],e=a[1],i&&(r=f(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:r}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},c=function(e,n,a,i){var s,p,u,c,d,F,y=[],X=typeof a;if(i=i||e,"undefined"===X||"function"===X){for(n=!n.length&&a.length?["require","exports","module"]:n,d=0;d<n.length;d+=1)if(c=g(n[d],i),p=c.f,"require"===p)y[d]=h.require(e);else if("exports"===p)y[d]=h.exports(e),F=!0;else if("module"===p)s=y[d]=h.module(e);else if(r(m,p)||r(v,p)||r(x,p))y[d]=f(p);else{if(!c.p)throw new Error(e+" missing "+p);c.p.load(c.n,o(i,!0),l(p),{}),y[d]=m[p]}u=a?a.apply(m[e],y):void 0,e&&(s&&s.exports!==t&&s.exports!==m[e]?m[e]=s.exports:u===t&&F||(m[e]=u))}else e&&(m[e]=a)},e=a=d=function(e,r,n,a,i){if("string"==typeof e)return h[e]?h[e](r):f(g(e,r).f);if(!e.splice){if(F=e,F.deps&&d(F.deps,F.callback),!r)return;r.splice?(e=r,r=n,n=null):e=t}return r=r||function(){},"function"==typeof n&&(n=a,a=i),a?c(t,e,r,n):setTimeout(function(){c(t,e,r,n)},4),d},d.config=function(e){return d(e)},e._defined=m,i=function(e,t,n){t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("jcampconverter",["require","exports","module"],function(e,a,i){var o=function(e,t,r){"use strict";function n(){function e(e){for(var t=[],r=0,n=e.length;n>r;r++)t[r]=parseFloat(e[r]);return t}function t(t,l){l=l||{};var p,u,c,d,g,h,m,v,F,x=new Date,y={},X={};X.profiling=[],X.logs=[];var b=[];X.spectra=b,X.info={};var A={};if("string"!=typeof t)return X;for(X.profiling&&X.profiling.push({action:"Before split to LDRS",time:new Date-x}),d=t.split(/[\r\n]+##/),X.profiling&&X.profiling.push({action:"Split to LDRS",time:new Date-x}),d[0]&&(d[0]=d[0].replace(/^[\r\n ]*##/,"")),g=0,h=d.length;h>g;g++){if(p=d[g],m=p.indexOf("="),m>0?(u=p.substring(0,m),c=p.substring(m+1).trim()):(u=p,c=""),u=u.replace(/[_ -]/g,"").toUpperCase(),"DATATABLE"==u&&(v=c.indexOf("\n"),-1==v&&(v=c.indexOf("\r")),v>0)){var T=-1,C=-1;if(F=c.substring(0,v).split(/[ ,;\t]+/),F[0].indexOf("++")>0){var O=F[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),E=F[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");T=y.symbol.indexOf(O),C=y.symbol.indexOf(E)}-1==T&&(T=0),-1==C&&(C=0),y.first&&(y.first.length>T&&(A.firstX=y.first[T]),y.first.length>C&&(A.firstY=y.first[C])),y.last&&(y.last.length>T&&(A.lastX=y.last[T]),y.last.length>C&&(A.lastY=y.last[C])),y.vardim&&y.vardim.length>T&&(A.nbPoints=y.vardim[T]),y.factor&&(y.factor.length>T&&(A.xFactor=y.factor[T]),y.factor.length>C&&(A.yFactor=y.factor[C])),y.units&&(y.units.length>T&&(A.xUnit=y.units[T]),y.units.length>C&&(A.yUnit=y.units[C])),A.datatable=F[0],F[1]&&F[1].indexOf("PEAKS")>-1?u="PEAKTABLE":F[1]&&(F[1].indexOf("XYDATA")||F[0].indexOf("++")>0)&&(u="XYDATA",A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1))}if("TITLE"==u)A.title=c;else if("DATATYPE"==u)A.dataType=c,c.indexOf("nD")>-1&&(X.twoD=!0);else if("XUNITS"==u)A.xUnit=c;else if("YUNITS"==u)A.yUnit=c;else if("FIRSTX"==u)A.firstX=parseFloat(c);else if("LASTX"==u)A.lastX=parseFloat(c);else if("FIRSTY"==u)A.firstY=parseFloat(c);else if("NPOINTS"==u)A.nbPoints=parseFloat(c);else if("XFACTOR"==u)A.xFactor=parseFloat(c);else if("YFACTOR"==u)A.yFactor=parseFloat(c);else if("DELTAX"==u)A.deltaX=parseFloat(c);else if(".OBSERVEFREQUENCY"==u||"$SFO1"==u)A.observeFrequency||(A.observeFrequency=parseFloat(c));else if(".OBSERVENUCLEUS"==u)A.xType||(X.xType=c.replace(/[^a-zA-Z0-9]/g,""));else if("$SFO2"==u)X.indirectFrequency||(X.indirectFrequency=parseFloat(c));else if("$OFFSET"==u)X.shiftOffsetNum=0,X.shiftOffsetVal||(X.shiftOffsetVal=parseFloat(c));else if("$REFERENCEPOINT"==u);else if("VARNAME"==u)y.varname=c.split(/[, \t]+/);else if("SYMBOL"==u)y.symbol=c.split(/[, \t]+/);else if("VARTYPE"==u)y.vartype=c.split(/[, \t]+/);else if("VARFORM"==u)y.varform=c.split(/[, \t]+/);else if("VARDIM"==u)y.vardim=e(c.split(/[, \t]+/));else if("UNITS"==u)y.units=c.split(/[, \t]+/);else if("FACTOR"==u)y.factor=e(c.split(/[, \t]+/));else if("FIRST"==u)y.first=e(c.split(/[, \t]+/));else if("LAST"==u)y.last=e(c.split(/[, \t]+/));else if("MIN"==u)y.min=e(c.split(/[, \t]+/));else if("MAX"==u)y.max=e(c.split(/[, \t]+/));else if(".NUCLEUS"==u)X.twoD&&(X.yType=c.split(/[, \t]+/)[0]);else if("PAGE"==u){A.page=c.trim(),A.pageValue=parseFloat(c.replace(/^.*=/,"")),A.pageSymbol=A.page.replace(/=.*/,"");var S=y.symbol.indexOf(A.pageSymbol),w="";y.units&&y.units[S]&&(w=y.units[S]),X.indirectFrequency&&"PPM"!=w&&(A.pageValue/=X.indirectFrequency)}else"RETENTIONTIME"==u?A.pageValue=parseFloat(c):"XYDATA"==u?(i(X,A),c.match(/.*\+\+.*/)?s(A,c,X):o(A,c,X),b.push(A),A={}):"PEAKTABLE"==u?(i(X,A),o(A,c,X),b.push(A),A={}):n(u)?A[r(u)]=c:u.match(/^[A-Z].*/)&&(X.info[u]=c.trim())}return X.profiling&&X.profiling.push({action:"Finished parsing",time:new Date-x}),X.twoD&&(f(X),X.profiling&&X.profiling.push({action:"Finished countour plot calculation",time:new Date-x}),l.keepSpectra||delete X.spectra),b.length>1&&b[0].dataType.toLowerCase().match(/.*mass./)&&(a(X),X.profiling&&X.profiling.push({action:"Finished GCMS calculation",time:new Date-x})),X.profiling&&X.profiling.push({action:"Total time",time:new Date-x}),X}function r(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"")}function n(e){for(var t=0;t<h.length;t++)if(e==h[t])return!0;return!1}function a(e){var t,n=e.spectra,a=[];for(t=0;t<h.length;t++){var i=r(h[t]);n[0][i]&&a.push(i)}var o={};for(o.gc={},o.ms=[],t=0;t<a.length;t++)o.gc[a[t]]=[];for(t=0;t<n.length;t++){for(var s=n[t],l=0;l<a.length;l++)o.gc[a[l]].push(s.pageValue),o.gc[a[l]].push(parseFloat(s[a[l]]));s.data&&(o.ms[t]=s.data[0])}e.gcms=o}function i(e,t){if(t.xFactor||(t.xFactor=1),t.yFactor||(t.yFactor=1),t.observeFrequency&&t.xUnit&&"HZ"==t.xUnit.toUpperCase()&&(t.xUnit="PPM",t.xFactor=t.xFactor/t.observeFrequency,t.firstX=t.firstX/t.observeFrequency,t.lastX=t.lastX/t.observeFrequency,t.deltaX=t.deltaX/t.observeFrequency),e.shiftOffsetVal){var r=t.firstX-e.shiftOffsetVal;t.firstX=t.firstX-r,t.lastX=t.lastX-r}}function o(e,t,r){var n,a,i,o,s;e.data=[],e.currentData=[],e.data.push(e.currentData);var l=t.split(/,? *,?[;\r\n]+ */),f=0;for(n=1,a=l.length;a>n;n++)if(s=l[n].trim().replace(c,"").split(d),s.length%2==0)for(i=0,o=s.length;o>i;i+=2)e.currentData[f++]=parseFloat(s[i])*e.xFactor,e.currentData[f++]=parseFloat(s[i+1])*e.yFactor;else r.logs.push("Format error: "+s);delete e.currentData}function s(e,t,r){function n(e,t,r){e.currentData.push(t,r*e.yFactor)}e.deltaX||(e.deltaX=(e.lastX-e.firstX)/(e.nbPoints-1)),e.data=[],e.currentData=[],e.data.push(e.currentData);var a,i,o,s=e.firstX,l=e.firstY,f=t.split(/[\r\n]+/);i=[];for(var p=1,d=f.length;d>p;p++)if(i=f[p].trim().replace(c,"").split(u),i.length>0){if(g){e.firstPoint||(e.firstPoint=parseFloat(i[0]));var h=parseFloat(i[0]-e.firstPoint)*e.xFactor+e.firstX;(a||0==a)&&(h+=e.deltaX),r.logs.push("Checking X value: currentX: "+s+" - expectedCurrentX: "+h)}for(var m=1,v=i.length;v>m;m++)if(1!=m||!a&&0!=a){if(i[m].length>0)if(o=i[m].charCodeAt(0),43==o||45==o||46==o||o>47&&58>o)a=void 0,l=parseFloat(i[m]),n(e,s,l),s+=e.deltaX;else if(o>63&&74>o)a=void 0,l=parseFloat(String.fromCharCode(o-16)+i[m].substring(1)),n(e,s,l),s+=e.deltaX;else if(o>96&&106>o)a=void 0,l=-parseFloat(String.fromCharCode(o-48)+i[m].substring(1)),n(e,s,l),s+=e.deltaX;else if(o>82&&91>o||115==o){var F=parseFloat(String.fromCharCode(o-34)+i[m].substring(1))-1;115==o&&(F=parseFloat("9"+i[m].substring(1))-1);for(var x=0;F>x;x++)a&&(l+=a),n(e,s,l),s+=e.deltaX}else 37==o?(a=parseFloat("0"+i[m].substring(1)),l+=a,n(e,s,l),s+=e.deltaX):o>73&&83>o?(a=parseFloat(String.fromCharCode(o-25)+i[m].substring(1)),l+=a,n(e,s,l),s+=e.deltaX):o>105&&115>o&&(a=-parseFloat(String.fromCharCode(o-57)+i[m].substring(1)),l+=a,n(e,s,l),s+=e.deltaX)}else a=void 0,o=i[m].charCodeAt(0)}delete e.currentData}function l(e){for(var t=[],r=0,n=e[0].data[0][0],a=e[0].data[0][0],i=e.length,o=e[0].data[0].length/2,s=0;i>s;s++){t[s]=[];for(var l=0;o>l;l++)t[s][l]=e[s].data[0][2*l+1],t[s][l]<n&&(n=e[s].data[0][2*l+1]),t[s][l]>a&&(a=e[s].data[0][2*l+1]),0!=s&&0!=l&&(r+=Math.abs(t[s][l]-t[s][l-1])+Math.abs(t[s][l]-t[s-1][l]))}return{z:t,minX:e[0].data[0][0],maxX:e[0].data[0][e[0].data[0].length-2],minY:e[0].pageValue,maxY:e[e.length-1].pageValue,minZ:n,maxZ:a,noise:r/((t.length-1)*(t[0].length-1)*2)}}function f(e){var t=l(e.spectra);e.contourLines=p(t),delete t.z,e.minMax=t}function p(e){for(var t,r,n,a,i,o=e.noise,s=e.z,l=[],f=7,p=new Float32Array(4),u=[],c=s.length,d=s[0].length,g=e.minX,h=e.maxX,m=(h-g)/(d-1),v=e.minY,F=e.maxY,x=(F-v)/(c-1),y=e.minZ,X=e.maxZ,b=0;2*f>b;b++){var A={};l.push(A);var T=b%2;i=0==T?(X-5*o)*Math.exp(b/2-f)+5*o:-(X-5*o)*Math.exp(b/2-f)-5*o;var C=[];if(A.zValue=i,A.lines=C,!(y>=i||i>=X))for(var O=0;c-1>O;O++)for(var E=0;d-1>E;E++){p[0]=s[O][E],p[1]=s[O][E+1],p[2]=s[O+1][E],p[3]=s[O+1][E+1];for(var S=0;4>S;S++)u[S]=p[S]>i;u[0]!=u[1]&&u[0]!=u[2]&&(t=E+(i-p[0])/(p[1]-p[0]),r=O,n=E,a=O+(i-p[0])/(p[2]-p[0]),C.push(t*m+g,r*x+v,n*m+g,a*x+v)),u[3]!=u[1]&&u[3]!=u[2]&&(t=E+1,r=O+1-(i-p[3])/(p[1]-p[3]),n=E+1-(i-p[3])/(p[2]-p[3]),a=O+1,C.push(t*m+g,r*x+v,n*m+g,a*x+v)),u[1]!=u[2]&&(t=E+1-(i-p[1])/(p[2]-p[1]),r=O+(i-p[1])/(p[2]-p[1]),u[1]!=u[0]&&(n=E+1-(i-p[1])/(p[0]-p[1]),a=O,C.push(t*m+g,r*x+v,n*m+g,a*x+v)),u[2]!=u[0]&&(n=E,a=O+1-(i-p[2])/(p[0]-p[2]),C.push(t*m+g,r*x+v,n*m+g,a*x+v)),u[1]!=u[3]&&(n=E+1,a=O+(i-p[1])/(p[3]-p[1]),C.push(t*m+g,r*x+v,n*m+g,a*x+v)),u[2]!=u[3]&&(n=E+(i-p[2])/(p[3]-p[2]),a=O+1,C.push(t*m+g,r*x+v,n*m+g,a*x+v)))}}return{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY,segments:l}}var u=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,c=/\$\$.*/,d=/[,\t ]+/,g=!1,h=["TIC",".RIC","SCANNUMBER"];return t}function a(e,t,r){return"boolean"==typeof t&&(r=t,t={}),r?i(e,t):l(e,t)}function i(e,t){return s||o(),new Promise(function(r){var n=Date.now()+""+Math.random();f[n]=r,s.postMessage({stamp:n,input:e,options:t})})}function o(){var e=URL.createObjectURL(new Blob(["var getConverter ="+n.toString()+";var convert = getConverter(); onmessage = function (event) { postMessage({stamp: event.data.stamp, output: convert(event.data.input, event.data.options)}); };"],{type:"application/javascript"}));s=new Worker(e),URL.revokeObjectURL(e),s.addEventListener("message",function(e){var t=e.data.stamp;f[t]&&f[t](e.data.output)})}var s,l=n(),f={};return r.exports={convert:a},r.exports}.call(this,e,a,i),s=t.JcampConverter;return r||n||(t.JcampConverter=o,o.noConflict=function(){return t.JcampConverter=s,o}),o}),a("jcampconverter")};return r?define(a):n?module.exports=a():a()}).call(this,"object"==typeof exports||"undefined"==typeof window?global:window,"object"==typeof exports||"undefined"==typeof window?global:window);